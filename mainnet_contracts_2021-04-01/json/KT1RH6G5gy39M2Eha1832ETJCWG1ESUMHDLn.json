{"code":[{"prim":"parameter","args":[{"prim":"unit"}]},{"prim":"storage","args":[{"prim":"pair","args":[{"prim":"pair","args":[{"prim":"address","annots":["%issuer"]},{"prim":"pair","args":[{"prim":"mutez","annots":["%price_per_tk"]},{"prim":"address","annots":["%protocol"]}]}]},{"prim":"pair","args":[{"prim":"timestamp","annots":["%timeframe"]},{"prim":"pair","args":[{"prim":"nat","annots":["%tk_amount"]},{"prim":"nat","annots":["%tk_id"]}]}]}]}]},{"prim":"code","args":[[{"prim":"CDR"},{"prim":"DUP"},[{"prim":"CAR"},{"prim":"CDR"},{"prim":"CAR"}],{"prim":"AMOUNT"},{"prim":"COMPARE"},{"prim":"GE"},{"prim":"IF","args":[[],[{"prim":"PUSH","args":[{"prim":"string"},{"string":"WrongCondition: sp.amount >= self.data.price_per_tk"}]},{"prim":"FAILWITH"}]]},{"prim":"DUP"},[{"prim":"CDR"},{"prim":"CAR"}],{"prim":"NOW"},{"prim":"COMPARE"},{"prim":"LE"},{"prim":"IF","args":[[],[{"prim":"PUSH","args":[{"prim":"string"},{"string":"WrongCondition: sp.now <= self.data.timeframe"}]},{"prim":"FAILWITH"}]]},{"prim":"DUP"},[{"prim":"CAR"},{"prim":"CDR"},{"prim":"CDR"}],{"prim":"CONTRACT","args":[{"prim":"pair","args":[{"prim":"address","annots":["%destination"]},{"prim":"nat","annots":["%tk_amount"]}]}],"annots":["%swap"]},{"prim":"NIL","args":[{"prim":"operation"}]},{"prim":"SWAP"},[{"prim":"IF_NONE","args":[[{"prim":"PUSH","args":[{"prim":"int"},{"int":"65"}]},{"prim":"FAILWITH"}],[]]}],{"prim":"PUSH","args":[{"prim":"mutez"},{"int":"0"}]},{"prim":"PUSH","args":[{"prim":"mutez"},{"int":"1000000"}]},{"prim":"DUP"},{"prim":"DIG","args":[{"int":"5"}]},{"prim":"DUP"},{"prim":"DUG","args":[{"int":"6"}]},[{"prim":"CAR"},{"prim":"CDR"},{"prim":"CAR"}],{"prim":"EDIV"},[{"prim":"IF_NONE","args":[[{"prim":"PUSH","args":[{"prim":"int"},{"int":"59"}]},{"prim":"FAILWITH"}],[]]}],{"prim":"CAR"},{"prim":"AMOUNT"},{"prim":"PUSH","args":[{"prim":"nat"},{"int":"1"}]},{"prim":"MUL"},{"prim":"EDIV"},[{"prim":"IF_NONE","args":[[{"prim":"PUSH","args":[{"prim":"int"},{"int":"59"}]},{"prim":"FAILWITH"}],[]]}],{"prim":"CAR"},{"prim":"EDIV"},[{"prim":"IF_NONE","args":[[{"prim":"PUSH","args":[{"prim":"int"},{"int":"59"}]},{"prim":"FAILWITH"}],[]]}],{"prim":"CAR"},{"prim":"SENDER"},{"prim":"PAIR","annots":["%destination","%tk_amount"]},{"prim":"TRANSFER_TOKENS"},{"prim":"CONS"},{"prim":"SWAP"},{"prim":"DUP"},{"prim":"DUG","args":[{"int":"2"}]},[{"prim":"CAR"},{"prim":"CAR"}],{"prim":"CONTRACT","args":[{"prim":"unit"}]},[{"prim":"IF_NONE","args":[[{"prim":"PUSH","args":[{"prim":"int"},{"int":"61"}]},{"prim":"FAILWITH"}],[]]}],{"prim":"AMOUNT"},{"prim":"UNIT"},{"prim":"TRANSFER_TOKENS"},{"prim":"CONS"},{"prim":"NIL","args":[{"prim":"operation"}]},{"prim":"SWAP"},{"prim":"ITER","args":[[{"prim":"CONS"}]]},{"prim":"PAIR"}]]}],"storage":{"prim":"Pair","args":[{"prim":"Pair","args":[{"bytes":"00005db799bf9b0dc319ba1cf21ab01461a9639043ca"},{"prim":"Pair","args":[{"int":"200000000"},{"bytes":"01e92adb5a7d13a120d21fd1ebe356b92f60f139d700"}]}]},{"prim":"Pair","args":[{"int":"1607129438"},{"prim":"Pair","args":[{"int":"1"},{"int":"1"}]}]}]}}
