{ parameter
    (or (or (or (or (pair %balance_of
                       (list %requests (pair (address %owner) (nat %token_id)))
                       (contract %callback
                          (list (pair (pair %request (address %owner) (nat %token_id)) (nat %balance)))))
                    (nat %bid))
                (or (nat %buy) (or (nat %cancel_auction) (nat %delist_token))))
            (or (or (pair %end_auction (address %highest_bidder) (nat %token_id))
                    (or (pair %list_token (mutez %price) (nat %token_id))
                        (pair %mint
                           (pair (pair (string %category) (pair (nat %collection_id) (string %collection_name)))
                                 (pair (pair (string %creator_name) (nat %creator_royalty))
                                       (pair (nat %editions) (string %ipfs_hash))))
                           (pair (pair (string %keywords) (pair (string %name) (bool %on_sale)))
                                 (pair (pair (mutez %price) (string %symbol))
                                       (pair (nat %token_id) (bytes %token_metadata_uri)))))))
                (or (pair %register_auction
                       (address %auction_contract)
                       (pair (mutez %reserve_price) (nat %token_id)))
                    (or (nat %resolve_auction) (address %set_administrator)))))
        (or (or (or (address %set_auction_factory) (nat %set_bidding_fee))
                (or (bytes %set_contract_metadata_uri)
                    (or (address %set_ipfs_registry) (nat %set_max_editions))))
            (or (or (nat %set_max_royalty)
                    (or (pair %set_token_metadata_uri (nat %token_id) (bytes %uri))
                        (nat %set_trading_fee)))
                (or (address %set_trading_fee_collector)
                    (or (list %transfer
                           (pair (address %from_)
                                 (list %txs (pair (address %to_) (pair (nat %token_id) (nat %amount))))))
                        (list %update_operators
                           (or (pair %add_operator (address %owner) (pair (address %operator) (nat %token_id)))
                               (pair %remove_operator (address %owner) (pair (address %operator) (nat %token_id)))))))))) ;
  storage
    (pair (pair (pair (pair (address %administrator) (nat %all_collections))
                      (pair (nat %all_tokens) (pair (address %auction_factory) (map %auctions nat address))))
                (pair (pair (nat %bidding_fee) (big_map %collections nat (list nat)))
                      (pair (nat %id_max_increment)
                            (pair (address %ipfs_registry) (big_map %ledger (pair address nat) nat)))))
          (pair (pair (pair (nat %max_editions) (nat %max_royalty))
                      (pair (big_map %metadata string bytes)
                            (pair (unit %metadata_string)
                                  (big_map %operators
                                     (pair (address %owner) (pair (address %operator) (nat %token_id)))
                                     unit))))
                (pair (pair (bool %paused)
                            (pair (big_map %token_metadata nat (pair (nat %token_id) (map %token_info string bytes)))
                                  (big_map %tokens
                                     nat
                                     (pair (nat %decimals)
                                           (pair (map %extras string string)
                                                 (pair (nat %token_id)
                                                       (pair (mutez %price)
                                                             (pair (string %ipfs_hash)
                                                                   (pair (address %owner)
                                                                         (pair (bool %on_sale)
                                                                               (pair (bool %on_auction)
                                                                                     (pair (nat %collection_id)
                                                                                           (pair (address %creator)
                                                                                                 (pair (nat %creator_royalty) (pair (nat %edition_number) (nat %editions))))))))))))))))
                      (pair (nat %trading_fee) (pair (address %trading_fee_collector) (nat %x)))))) ;
  code { UNPAIR ;
         IF_LEFT
           { IF_LEFT
               { IF_LEFT
                   { IF_LEFT
                       { DUP ;
                         CAR ;
                         MAP { DUP 3 ;
                               CDR ;
                               CDR ;
                               CAR ;
                               CDR ;
                               CDR ;
                               SWAP ;
                               DUP ;
                               DUG 2 ;
                               CDR ;
                               MEM ;
                               IF {} { PUSH string "FA2_TOKEN_UNDEFINED" ; FAILWITH } ;
                               DUP 3 ;
                               CAR ;
                               CDR ;
                               CDR ;
                               CDR ;
                               CDR ;
                               SWAP ;
                               DUP ;
                               CDR ;
                               SWAP ;
                               DUP ;
                               DUG 3 ;
                               CAR ;
                               PAIR ;
                               MEM ;
                               IF { DUP 3 ;
                                    CAR ;
                                    CDR ;
                                    CDR ;
                                    CDR ;
                                    CDR ;
                                    SWAP ;
                                    DUP ;
                                    CDR ;
                                    SWAP ;
                                    DUP ;
                                    DUG 3 ;
                                    CAR ;
                                    PAIR ;
                                    GET ;
                                    IF_NONE { PUSH int 741 ; FAILWITH } {} ;
                                    SWAP ;
                                    PAIR %request %balance }
                                  { PUSH nat 0 ; SWAP ; PAIR %request %balance } } ;
                         NIL operation ;
                         DIG 2 ;
                         CDR ;
                         PUSH mutez 0 ;
                         DIG 3 ;
                         TRANSFER_TOKENS ;
                         CONS }
                       { NIL operation ;
                         DUP 3 ;
                         GET 9 ;
                         CONTRACT unit ;
                         IF_NONE { PUSH int 567 ; FAILWITH } {} ;
                         PUSH nat 1000 ;
                         AMOUNT ;
                         DUP 6 ;
                         CAR ;
                         CDR ;
                         CAR ;
                         CAR ;
                         MUL ;
                         EDIV ;
                         IF_NONE { PUSH int 566 ; FAILWITH } {} ;
                         CAR ;
                         UNIT ;
                         TRANSFER_TOKENS ;
                         CONS ;
                         DUP 3 ;
                         CAR ;
                         CAR ;
                         CDR ;
                         CDR ;
                         CDR ;
                         DIG 2 ;
                         GET ;
                         IF_NONE { PUSH int 560 ; FAILWITH } {} ;
                         CONTRACT %bid unit ;
                         IF_NONE { PUSH int 560 ; FAILWITH } {} ;
                         PUSH nat 1000 ;
                         AMOUNT ;
                         DUP 5 ;
                         CAR ;
                         CDR ;
                         CAR ;
                         CAR ;
                         MUL ;
                         EDIV ;
                         IF_NONE { PUSH int 566 ; FAILWITH } {} ;
                         CAR ;
                         AMOUNT ;
                         SUB ;
                         UNIT ;
                         TRANSFER_TOKENS ;
                         CONS } }
                   { IF_LEFT
                       { SWAP ;
                         DUP ;
                         DUG 2 ;
                         CAR ;
                         CAR ;
                         CDR ;
                         CDR ;
                         CDR ;
                         SWAP ;
                         DUP ;
                         DUG 2 ;
                         MEM ;
                         IF { PUSH string "WrongCondition: ~ (self.data.auctions.contains(params.token_id))" ;
                              FAILWITH }
                            {} ;
                         SENDER ;
                         DUP 3 ;
                         CDR ;
                         CDR ;
                         CAR ;
                         CDR ;
                         CDR ;
                         DUP 3 ;
                         GET ;
                         IF_NONE { PUSH int 765 ; FAILWITH } {} ;
                         GET 11 ;
                         COMPARE ;
                         NEQ ;
                         IF {}
                            { PUSH string
                                   "WrongCondition: self.data.tokens[params.token_id].owner != sp.sender" ;
                              FAILWITH } ;
                         AMOUNT ;
                         DUP 3 ;
                         CDR ;
                         CDR ;
                         CAR ;
                         CDR ;
                         CDR ;
                         DUP 3 ;
                         GET ;
                         IF_NONE { PUSH int 765 ; FAILWITH } {} ;
                         GET 7 ;
                         COMPARE ;
                         LE ;
                         IF {}
                            { PUSH string
                                   "WrongCondition: self.data.tokens[params.token_id].price <= sp.amount" ;
                              FAILWITH } ;
                         PUSH bool True ;
                         DUP 3 ;
                         CDR ;
                         CDR ;
                         CAR ;
                         CDR ;
                         CDR ;
                         DUP 3 ;
                         GET ;
                         IF_NONE { PUSH int 765 ; FAILWITH } {} ;
                         GET 13 ;
                         COMPARE ;
                         EQ ;
                         IF {}
                            { PUSH string "WrongCondition: self.data.tokens[params.token_id].on_sale == True" ;
                              FAILWITH } ;
                         NIL operation ;
                         DUP 3 ;
                         GET 9 ;
                         CONTRACT unit ;
                         IF_NONE { PUSH int 683 ; FAILWITH } {} ;
                         PUSH nat 1000 ;
                         AMOUNT ;
                         DUP 6 ;
                         GET 7 ;
                         MUL ;
                         EDIV ;
                         IF_NONE { PUSH int 682 ; FAILWITH } {} ;
                         CAR ;
                         UNIT ;
                         TRANSFER_TOKENS ;
                         CONS ;
                         PUSH mutez 0 ;
                         PUSH nat 100 ;
                         AMOUNT ;
                         DUP 6 ;
                         CDR ;
                         CDR ;
                         CAR ;
                         CDR ;
                         CDR ;
                         DUP 6 ;
                         GET ;
                         IF_NONE { PUSH int 671 ; FAILWITH } {} ;
                         GET 21 ;
                         MUL ;
                         EDIV ;
                         IF_NONE { PUSH int 687 ; FAILWITH } {} ;
                         CAR ;
                         COMPARE ;
                         NEQ ;
                         IF { DUP 3 ;
                              CDR ;
                              CDR ;
                              CAR ;
                              CDR ;
                              CDR ;
                              DUP 3 ;
                              GET ;
                              IF_NONE { PUSH int 671 ; FAILWITH } {} ;
                              GET 19 ;
                              CONTRACT unit ;
                              IF_NONE { PUSH int 689 ; FAILWITH } {} ;
                              PUSH nat 100 ;
                              AMOUNT ;
                              DUP 6 ;
                              CDR ;
                              CDR ;
                              CAR ;
                              CDR ;
                              CDR ;
                              DUP 6 ;
                              GET ;
                              IF_NONE { PUSH int 671 ; FAILWITH } {} ;
                              GET 21 ;
                              MUL ;
                              EDIV ;
                              IF_NONE { PUSH int 687 ; FAILWITH } {} ;
                              CAR ;
                              UNIT ;
                              TRANSFER_TOKENS ;
                              CONS }
                            {} ;
                         DUP 3 ;
                         CDR ;
                         CDR ;
                         CAR ;
                         CDR ;
                         CDR ;
                         DUP 3 ;
                         GET ;
                         IF_NONE { PUSH int 671 ; FAILWITH } {} ;
                         GET 11 ;
                         CONTRACT unit ;
                         IF_NONE { PUSH int 693 ; FAILWITH } {} ;
                         PUSH nat 100 ;
                         AMOUNT ;
                         DUP 6 ;
                         CDR ;
                         CDR ;
                         CAR ;
                         CDR ;
                         CDR ;
                         DUP 6 ;
                         GET ;
                         IF_NONE { PUSH int 671 ; FAILWITH } {} ;
                         GET 21 ;
                         MUL ;
                         EDIV ;
                         IF_NONE { PUSH int 687 ; FAILWITH } {} ;
                         CAR ;
                         PUSH nat 1000 ;
                         AMOUNT ;
                         DUP 7 ;
                         GET 7 ;
                         MUL ;
                         EDIV ;
                         IF_NONE { PUSH int 682 ; FAILWITH } {} ;
                         CAR ;
                         AMOUNT ;
                         SUB ;
                         SUB ;
                         UNIT ;
                         TRANSFER_TOKENS ;
                         CONS ;
                         NIL (pair (address %from_)
                                   (list %txs (pair (nat %amount) (pair (address %to_) (nat %token_id))))) ;
                         NIL (pair (nat %amount) (pair (address %to_) (nat %token_id))) ;
                         DUP 4 ;
                         SENDER ;
                         PAIR %to_ %token_id ;
                         PUSH nat 1 ;
                         PAIR %amount ;
                         CONS ;
                         DUP 5 ;
                         CDR ;
                         CDR ;
                         CAR ;
                         CDR ;
                         CDR ;
                         DUP 5 ;
                         GET ;
                         IF_NONE { PUSH int 765 ; FAILWITH } {} ;
                         GET 11 ;
                         PAIR %from_ %txs ;
                         CONS ;
                         ITER { DUP ;
                                CDR ;
                                ITER { DUP ;
                                       CAR ;
                                       PUSH nat 0 ;
                                       COMPARE ;
                                       LT ;
                                       IF {} { PUSH string "TRANSFER_OF_ZERO" ; FAILWITH } ;
                                       DUP 5 ;
                                       CDR ;
                                       CDR ;
                                       CAR ;
                                       CDR ;
                                       CDR ;
                                       SWAP ;
                                       DUP ;
                                       DUG 2 ;
                                       GET 4 ;
                                       MEM ;
                                       IF {} { PUSH string "FA2_TOKEN_UNDEFINED" ; FAILWITH } ;
                                       DUP ;
                                       CAR ;
                                       PUSH nat 0 ;
                                       COMPARE ;
                                       LT ;
                                       IF { DUP ;
                                            CAR ;
                                            DUP 6 ;
                                            CAR ;
                                            CDR ;
                                            CDR ;
                                            CDR ;
                                            CDR ;
                                            DUP 3 ;
                                            GET 4 ;
                                            DUP 5 ;
                                            CAR ;
                                            PAIR ;
                                            GET ;
                                            IF_NONE { PUSH int 710 ; FAILWITH } {} ;
                                            COMPARE ;
                                            GE ;
                                            IF {} { PUSH string "FA2_INSUFFICIENT_BALANCE" ; FAILWITH } ;
                                            DUP 5 ;
                                            UNPAIR ;
                                            UNPAIR ;
                                            SWAP ;
                                            UNPAIR ;
                                            SWAP ;
                                            UNPAIR ;
                                            SWAP ;
                                            UNPAIR ;
                                            SWAP ;
                                            DUP ;
                                            DUP 8 ;
                                            GET 4 ;
                                            DUP 10 ;
                                            CAR ;
                                            PAIR ;
                                            DUP ;
                                            DUG 2 ;
                                            GET ;
                                            IF_NONE { PUSH int 714 ; FAILWITH } { DROP } ;
                                            DUP 8 ;
                                            CAR ;
                                            DIG 12 ;
                                            CAR ;
                                            CDR ;
                                            CDR ;
                                            CDR ;
                                            CDR ;
                                            DUP 10 ;
                                            GET 4 ;
                                            DUP 12 ;
                                            CAR ;
                                            PAIR ;
                                            GET ;
                                            IF_NONE { PUSH int 714 ; FAILWITH } {} ;
                                            SUB ;
                                            ISNAT ;
                                            IF_NONE { PUSH int 714 ; FAILWITH } {} ;
                                            SOME ;
                                            SWAP ;
                                            UPDATE ;
                                            SWAP ;
                                            PAIR ;
                                            SWAP ;
                                            PAIR ;
                                            SWAP ;
                                            PAIR ;
                                            SWAP ;
                                            PAIR ;
                                            PAIR ;
                                            DUP ;
                                            DUG 5 ;
                                            CAR ;
                                            CDR ;
                                            CDR ;
                                            CDR ;
                                            CDR ;
                                            SWAP ;
                                            DUP ;
                                            GET 4 ;
                                            SWAP ;
                                            DUP ;
                                            DUG 3 ;
                                            GET 3 ;
                                            PAIR ;
                                            MEM ;
                                            IF { DUP 5 ;
                                                 UNPAIR ;
                                                 UNPAIR ;
                                                 SWAP ;
                                                 UNPAIR ;
                                                 SWAP ;
                                                 UNPAIR ;
                                                 SWAP ;
                                                 UNPAIR ;
                                                 SWAP ;
                                                 DUP ;
                                                 DIG 7 ;
                                                 DUP ;
                                                 GET 4 ;
                                                 SWAP ;
                                                 DUP ;
                                                 DUG 9 ;
                                                 GET 3 ;
                                                 PAIR ;
                                                 DUP ;
                                                 DUG 2 ;
                                                 GET ;
                                                 IF_NONE { PUSH int 717 ; FAILWITH } { DROP } ;
                                                 DUP 8 ;
                                                 CAR ;
                                                 DIG 12 ;
                                                 CAR ;
                                                 CDR ;
                                                 CDR ;
                                                 CDR ;
                                                 CDR ;
                                                 DIG 9 ;
                                                 DUP ;
                                                 GET 4 ;
                                                 SWAP ;
                                                 DUP ;
                                                 DUG 11 ;
                                                 GET 3 ;
                                                 PAIR ;
                                                 GET ;
                                                 IF_NONE { PUSH int 717 ; FAILWITH } {} ;
                                                 ADD ;
                                                 SOME ;
                                                 SWAP ;
                                                 UPDATE ;
                                                 SWAP ;
                                                 PAIR ;
                                                 SWAP ;
                                                 PAIR ;
                                                 SWAP ;
                                                 PAIR ;
                                                 SWAP ;
                                                 PAIR ;
                                                 PAIR ;
                                                 DUG 4 }
                                               { DIG 4 ;
                                                 UNPAIR ;
                                                 UNPAIR ;
                                                 SWAP ;
                                                 UNPAIR ;
                                                 SWAP ;
                                                 UNPAIR ;
                                                 SWAP ;
                                                 UNPAIR ;
                                                 SWAP ;
                                                 DUP 7 ;
                                                 CAR ;
                                                 SOME ;
                                                 DIG 7 ;
                                                 DUP ;
                                                 GET 4 ;
                                                 SWAP ;
                                                 DUP ;
                                                 DUG 9 ;
                                                 GET 3 ;
                                                 PAIR ;
                                                 UPDATE ;
                                                 SWAP ;
                                                 PAIR ;
                                                 SWAP ;
                                                 PAIR ;
                                                 SWAP ;
                                                 PAIR ;
                                                 SWAP ;
                                                 PAIR ;
                                                 PAIR ;
                                                 DUG 4 } ;
                                            DIG 4 ;
                                            UNPAIR ;
                                            SWAP ;
                                            UNPAIR ;
                                            SWAP ;
                                            UNPAIR ;
                                            UNPAIR ;
                                            SWAP ;
                                            UNPAIR ;
                                            SWAP ;
                                            DUP ;
                                            DUP 8 ;
                                            GET 4 ;
                                            DUP ;
                                            DUG 2 ;
                                            GET ;
                                            IF_NONE { PUSH int 724 ; FAILWITH } {} ;
                                            UNPAIR ;
                                            SWAP ;
                                            UNPAIR ;
                                            SWAP ;
                                            UNPAIR ;
                                            SWAP ;
                                            UNPAIR ;
                                            SWAP ;
                                            UNPAIR ;
                                            SWAP ;
                                            CDR ;
                                            DUP 14 ;
                                            GET 3 ;
                                            PAIR ;
                                            SWAP ;
                                            PAIR ;
                                            SWAP ;
                                            PAIR ;
                                            SWAP ;
                                            PAIR ;
                                            SWAP ;
                                            PAIR ;
                                            SWAP ;
                                            PAIR ;
                                            SOME ;
                                            SWAP ;
                                            UPDATE ;
                                            SWAP ;
                                            PAIR ;
                                            SWAP ;
                                            PAIR ;
                                            PAIR ;
                                            SWAP ;
                                            PAIR ;
                                            SWAP ;
                                            PAIR ;
                                            UNPAIR ;
                                            SWAP ;
                                            UNPAIR ;
                                            SWAP ;
                                            UNPAIR ;
                                            UNPAIR ;
                                            SWAP ;
                                            UNPAIR ;
                                            SWAP ;
                                            DUP ;
                                            DIG 7 ;
                                            GET 4 ;
                                            DUP ;
                                            DUG 2 ;
                                            GET ;
                                            IF_NONE { PUSH int 727 ; FAILWITH } {} ;
                                            UNPAIR ;
                                            SWAP ;
                                            UNPAIR ;
                                            SWAP ;
                                            UNPAIR ;
                                            SWAP ;
                                            UNPAIR ;
                                            SWAP ;
                                            UNPAIR ;
                                            SWAP ;
                                            UNPAIR ;
                                            SWAP ;
                                            CDR ;
                                            PUSH bool False ;
                                            PAIR ;
                                            SWAP ;
                                            PAIR ;
                                            SWAP ;
                                            PAIR ;
                                            SWAP ;
                                            PAIR ;
                                            SWAP ;
                                            PAIR ;
                                            SWAP ;
                                            PAIR ;
                                            SWAP ;
                                            PAIR ;
                                            SOME ;
                                            SWAP ;
                                            UPDATE ;
                                            SWAP ;
                                            PAIR ;
                                            SWAP ;
                                            PAIR ;
                                            PAIR ;
                                            SWAP ;
                                            PAIR ;
                                            SWAP ;
                                            PAIR ;
                                            DUG 3 }
                                          { DROP } } ;
                                DROP } ;
                         SWAP ;
                         DROP }
                       { IF_LEFT
                           { NIL operation ;
                             DUP 3 ;
                             CAR ;
                             CAR ;
                             CDR ;
                             CDR ;
                             CDR ;
                             DUP 3 ;
                             GET ;
                             IF_NONE { PUSH int 588 ; FAILWITH } {} ;
                             CONTRACT %cancel_auction unit ;
                             IF_NONE { PUSH int 588 ; FAILWITH } {} ;
                             AMOUNT ;
                             UNIT ;
                             TRANSFER_TOKENS ;
                             CONS ;
                             DIG 2 ;
                             UNPAIR ;
                             UNPAIR ;
                             UNPAIR ;
                             SWAP ;
                             UNPAIR ;
                             SWAP ;
                             UNPAIR ;
                             SWAP ;
                             NONE address ;
                             DUP 9 ;
                             UPDATE ;
                             SWAP ;
                             PAIR ;
                             SWAP ;
                             PAIR ;
                             SWAP ;
                             PAIR ;
                             PAIR ;
                             PAIR ;
                             UNPAIR ;
                             SWAP ;
                             UNPAIR ;
                             SWAP ;
                             UNPAIR ;
                             UNPAIR ;
                             SWAP ;
                             UNPAIR ;
                             SWAP ;
                             DUP ;
                             DIG 8 ;
                             DUP ;
                             DUG 2 ;
                             GET ;
                             IF_NONE { PUSH int 593 ; FAILWITH } {} ;
                             UNPAIR ;
                             SWAP ;
                             UNPAIR ;
                             SWAP ;
                             UNPAIR ;
                             SWAP ;
                             UNPAIR ;
                             SWAP ;
                             UNPAIR ;
                             SWAP ;
                             UNPAIR ;
                             SWAP ;
                             UNPAIR ;
                             SWAP ;
                             CDR ;
                             PUSH bool False ;
                             PAIR ;
                             SWAP ;
                             PAIR ;
                             SWAP ;
                             PAIR ;
                             SWAP ;
                             PAIR ;
                             SWAP ;
                             PAIR ;
                             SWAP ;
                             PAIR ;
                             SWAP ;
                             PAIR ;
                             SWAP ;
                             PAIR ;
                             SOME ;
                             SWAP ;
                             UPDATE ;
                             SWAP ;
                             PAIR ;
                             SWAP ;
                             PAIR ;
                             PAIR ;
                             SWAP ;
                             PAIR ;
                             SWAP ;
                             PAIR ;
                             SWAP }
                           { SWAP ;
                             DUP ;
                             DUG 2 ;
                             CAR ;
                             CAR ;
                             CDR ;
                             CDR ;
                             CDR ;
                             SWAP ;
                             DUP ;
                             DUG 2 ;
                             MEM ;
                             IF { PUSH string "WrongCondition: ~ (self.data.auctions.contains(params.token_id))" ;
                                  FAILWITH }
                                {} ;
                             PUSH nat 1 ;
                             DUP 3 ;
                             CAR ;
                             CDR ;
                             CDR ;
                             CDR ;
                             CDR ;
                             DUP 3 ;
                             SENDER ;
                             PAIR ;
                             GET ;
                             IF_NONE { PUSH int 554 ; FAILWITH } {} ;
                             COMPARE ;
                             GE ;
                             IF {}
                                { PUSH string
                                       "WrongCondition: self.data.ledger[(sp.set_type_expr(sp.sender, sp.TAddress), sp.set_type_expr(params.token_id, sp.TNat))].balance >= 1" ;
                                  FAILWITH } ;
                             SWAP ;
                             UNPAIR ;
                             SWAP ;
                             UNPAIR ;
                             SWAP ;
                             UNPAIR ;
                             UNPAIR ;
                             SWAP ;
                             UNPAIR ;
                             SWAP ;
                             DUP ;
                             DIG 7 ;
                             DUP ;
                             DUG 2 ;
                             GET ;
                             IF_NONE { PUSH int 555 ; FAILWITH } {} ;
                             UNPAIR ;
                             SWAP ;
                             UNPAIR ;
                             SWAP ;
                             UNPAIR ;
                             SWAP ;
                             UNPAIR ;
                             SWAP ;
                             UNPAIR ;
                             SWAP ;
                             UNPAIR ;
                             SWAP ;
                             CDR ;
                             PUSH bool False ;
                             PAIR ;
                             SWAP ;
                             PAIR ;
                             SWAP ;
                             PAIR ;
                             SWAP ;
                             PAIR ;
                             SWAP ;
                             PAIR ;
                             SWAP ;
                             PAIR ;
                             SWAP ;
                             PAIR ;
                             SOME ;
                             SWAP ;
                             UPDATE ;
                             SWAP ;
                             PAIR ;
                             SWAP ;
                             PAIR ;
                             PAIR ;
                             SWAP ;
                             PAIR ;
                             SWAP ;
                             PAIR ;
                             NIL operation } } } }
               { IF_LEFT
                   { IF_LEFT
                       { SWAP ;
                         DUP ;
                         DUG 2 ;
                         CAR ;
                         CAR ;
                         CDR ;
                         CDR ;
                         CDR ;
                         SWAP ;
                         DUP ;
                         DUG 2 ;
                         CDR ;
                         GET ;
                         IF_NONE { PUSH int 599 ; FAILWITH } {} ;
                         SENDER ;
                         COMPARE ;
                         EQ ;
                         IF {}
                            { PUSH string "WrongCondition: sp.sender == self.data.auctions[params.token_id]" ;
                              FAILWITH } ;
                         SWAP ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         SWAP ;
                         DUP ;
                         DUP 8 ;
                         CDR ;
                         DUP ;
                         DUG 2 ;
                         GET ;
                         IF_NONE { PUSH int 604 ; FAILWITH } {} ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         SWAP ;
                         CDR ;
                         AMOUNT ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         SOME ;
                         SWAP ;
                         UPDATE ;
                         SWAP ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         SWAP ;
                         NIL operation ;
                         DUP 3 ;
                         GET 9 ;
                         CONTRACT unit ;
                         IF_NONE { PUSH int 683 ; FAILWITH } {} ;
                         PUSH nat 1000 ;
                         AMOUNT ;
                         DUP 6 ;
                         GET 7 ;
                         MUL ;
                         EDIV ;
                         IF_NONE { PUSH int 682 ; FAILWITH } {} ;
                         CAR ;
                         UNIT ;
                         TRANSFER_TOKENS ;
                         CONS ;
                         PUSH mutez 0 ;
                         PUSH nat 100 ;
                         AMOUNT ;
                         DUP 6 ;
                         CDR ;
                         CDR ;
                         CAR ;
                         CDR ;
                         CDR ;
                         DUP 6 ;
                         CDR ;
                         GET ;
                         IF_NONE { PUSH int 671 ; FAILWITH } {} ;
                         GET 21 ;
                         MUL ;
                         EDIV ;
                         IF_NONE { PUSH int 687 ; FAILWITH } {} ;
                         CAR ;
                         COMPARE ;
                         NEQ ;
                         IF { DUP 3 ;
                              CDR ;
                              CDR ;
                              CAR ;
                              CDR ;
                              CDR ;
                              DUP 3 ;
                              CDR ;
                              GET ;
                              IF_NONE { PUSH int 671 ; FAILWITH } {} ;
                              GET 19 ;
                              CONTRACT unit ;
                              IF_NONE { PUSH int 689 ; FAILWITH } {} ;
                              PUSH nat 100 ;
                              AMOUNT ;
                              DUP 6 ;
                              CDR ;
                              CDR ;
                              CAR ;
                              CDR ;
                              CDR ;
                              DUP 6 ;
                              CDR ;
                              GET ;
                              IF_NONE { PUSH int 671 ; FAILWITH } {} ;
                              GET 21 ;
                              MUL ;
                              EDIV ;
                              IF_NONE { PUSH int 687 ; FAILWITH } {} ;
                              CAR ;
                              UNIT ;
                              TRANSFER_TOKENS ;
                              CONS }
                            {} ;
                         DUP 3 ;
                         CDR ;
                         CDR ;
                         CAR ;
                         CDR ;
                         CDR ;
                         DUP 3 ;
                         CDR ;
                         GET ;
                         IF_NONE { PUSH int 671 ; FAILWITH } {} ;
                         GET 11 ;
                         CONTRACT unit ;
                         IF_NONE { PUSH int 693 ; FAILWITH } {} ;
                         PUSH nat 100 ;
                         AMOUNT ;
                         DUP 6 ;
                         CDR ;
                         CDR ;
                         CAR ;
                         CDR ;
                         CDR ;
                         DUP 6 ;
                         CDR ;
                         GET ;
                         IF_NONE { PUSH int 671 ; FAILWITH } {} ;
                         GET 21 ;
                         MUL ;
                         EDIV ;
                         IF_NONE { PUSH int 687 ; FAILWITH } {} ;
                         CAR ;
                         PUSH nat 1000 ;
                         AMOUNT ;
                         DUP 7 ;
                         GET 7 ;
                         MUL ;
                         EDIV ;
                         IF_NONE { PUSH int 682 ; FAILWITH } {} ;
                         CAR ;
                         AMOUNT ;
                         SUB ;
                         SUB ;
                         UNIT ;
                         TRANSFER_TOKENS ;
                         CONS ;
                         NIL (pair (address %from_)
                                   (list %txs (pair (nat %amount) (pair (address %to_) (nat %token_id))))) ;
                         NIL (pair (nat %amount) (pair (address %to_) (nat %token_id))) ;
                         DIG 3 ;
                         DUP ;
                         CDR ;
                         SWAP ;
                         DUP ;
                         DUG 5 ;
                         CAR ;
                         PAIR %to_ %token_id ;
                         PUSH nat 1 ;
                         PAIR %amount ;
                         CONS ;
                         DUP 5 ;
                         CDR ;
                         CDR ;
                         CAR ;
                         CDR ;
                         CDR ;
                         DUP 5 ;
                         CDR ;
                         GET ;
                         IF_NONE { PUSH int 606 ; FAILWITH } {} ;
                         GET 11 ;
                         PAIR %from_ %txs ;
                         CONS ;
                         ITER { DUP ;
                                CDR ;
                                ITER { DUP ;
                                       CAR ;
                                       PUSH nat 0 ;
                                       COMPARE ;
                                       LT ;
                                       IF {} { PUSH string "TRANSFER_OF_ZERO" ; FAILWITH } ;
                                       DUP 5 ;
                                       CDR ;
                                       CDR ;
                                       CAR ;
                                       CDR ;
                                       CDR ;
                                       SWAP ;
                                       DUP ;
                                       DUG 2 ;
                                       GET 4 ;
                                       MEM ;
                                       IF {} { PUSH string "FA2_TOKEN_UNDEFINED" ; FAILWITH } ;
                                       DUP ;
                                       CAR ;
                                       PUSH nat 0 ;
                                       COMPARE ;
                                       LT ;
                                       IF { DUP ;
                                            CAR ;
                                            DUP 6 ;
                                            CAR ;
                                            CDR ;
                                            CDR ;
                                            CDR ;
                                            CDR ;
                                            DUP 3 ;
                                            GET 4 ;
                                            DUP 5 ;
                                            CAR ;
                                            PAIR ;
                                            GET ;
                                            IF_NONE { PUSH int 710 ; FAILWITH } {} ;
                                            COMPARE ;
                                            GE ;
                                            IF {} { PUSH string "FA2_INSUFFICIENT_BALANCE" ; FAILWITH } ;
                                            DUP 5 ;
                                            UNPAIR ;
                                            UNPAIR ;
                                            SWAP ;
                                            UNPAIR ;
                                            SWAP ;
                                            UNPAIR ;
                                            SWAP ;
                                            UNPAIR ;
                                            SWAP ;
                                            DUP ;
                                            DUP 8 ;
                                            GET 4 ;
                                            DUP 10 ;
                                            CAR ;
                                            PAIR ;
                                            DUP ;
                                            DUG 2 ;
                                            GET ;
                                            IF_NONE { PUSH int 714 ; FAILWITH } { DROP } ;
                                            DUP 8 ;
                                            CAR ;
                                            DIG 12 ;
                                            CAR ;
                                            CDR ;
                                            CDR ;
                                            CDR ;
                                            CDR ;
                                            DUP 10 ;
                                            GET 4 ;
                                            DUP 12 ;
                                            CAR ;
                                            PAIR ;
                                            GET ;
                                            IF_NONE { PUSH int 714 ; FAILWITH } {} ;
                                            SUB ;
                                            ISNAT ;
                                            IF_NONE { PUSH int 714 ; FAILWITH } {} ;
                                            SOME ;
                                            SWAP ;
                                            UPDATE ;
                                            SWAP ;
                                            PAIR ;
                                            SWAP ;
                                            PAIR ;
                                            SWAP ;
                                            PAIR ;
                                            SWAP ;
                                            PAIR ;
                                            PAIR ;
                                            DUP ;
                                            DUG 5 ;
                                            CAR ;
                                            CDR ;
                                            CDR ;
                                            CDR ;
                                            CDR ;
                                            SWAP ;
                                            DUP ;
                                            GET 4 ;
                                            SWAP ;
                                            DUP ;
                                            DUG 3 ;
                                            GET 3 ;
                                            PAIR ;
                                            MEM ;
                                            IF { DUP 5 ;
                                                 UNPAIR ;
                                                 UNPAIR ;
                                                 SWAP ;
                                                 UNPAIR ;
                                                 SWAP ;
                                                 UNPAIR ;
                                                 SWAP ;
                                                 UNPAIR ;
                                                 SWAP ;
                                                 DUP ;
                                                 DIG 7 ;
                                                 DUP ;
                                                 GET 4 ;
                                                 SWAP ;
                                                 DUP ;
                                                 DUG 9 ;
                                                 GET 3 ;
                                                 PAIR ;
                                                 DUP ;
                                                 DUG 2 ;
                                                 GET ;
                                                 IF_NONE { PUSH int 717 ; FAILWITH } { DROP } ;
                                                 DUP 8 ;
                                                 CAR ;
                                                 DIG 12 ;
                                                 CAR ;
                                                 CDR ;
                                                 CDR ;
                                                 CDR ;
                                                 CDR ;
                                                 DIG 9 ;
                                                 DUP ;
                                                 GET 4 ;
                                                 SWAP ;
                                                 DUP ;
                                                 DUG 11 ;
                                                 GET 3 ;
                                                 PAIR ;
                                                 GET ;
                                                 IF_NONE { PUSH int 717 ; FAILWITH } {} ;
                                                 ADD ;
                                                 SOME ;
                                                 SWAP ;
                                                 UPDATE ;
                                                 SWAP ;
                                                 PAIR ;
                                                 SWAP ;
                                                 PAIR ;
                                                 SWAP ;
                                                 PAIR ;
                                                 SWAP ;
                                                 PAIR ;
                                                 PAIR ;
                                                 DUG 4 }
                                               { DIG 4 ;
                                                 UNPAIR ;
                                                 UNPAIR ;
                                                 SWAP ;
                                                 UNPAIR ;
                                                 SWAP ;
                                                 UNPAIR ;
                                                 SWAP ;
                                                 UNPAIR ;
                                                 SWAP ;
                                                 DUP 7 ;
                                                 CAR ;
                                                 SOME ;
                                                 DIG 7 ;
                                                 DUP ;
                                                 GET 4 ;
                                                 SWAP ;
                                                 DUP ;
                                                 DUG 9 ;
                                                 GET 3 ;
                                                 PAIR ;
                                                 UPDATE ;
                                                 SWAP ;
                                                 PAIR ;
                                                 SWAP ;
                                                 PAIR ;
                                                 SWAP ;
                                                 PAIR ;
                                                 SWAP ;
                                                 PAIR ;
                                                 PAIR ;
                                                 DUG 4 } ;
                                            DIG 4 ;
                                            UNPAIR ;
                                            SWAP ;
                                            UNPAIR ;
                                            SWAP ;
                                            UNPAIR ;
                                            UNPAIR ;
                                            SWAP ;
                                            UNPAIR ;
                                            SWAP ;
                                            DUP ;
                                            DUP 8 ;
                                            GET 4 ;
                                            DUP ;
                                            DUG 2 ;
                                            GET ;
                                            IF_NONE { PUSH int 724 ; FAILWITH } {} ;
                                            UNPAIR ;
                                            SWAP ;
                                            UNPAIR ;
                                            SWAP ;
                                            UNPAIR ;
                                            SWAP ;
                                            UNPAIR ;
                                            SWAP ;
                                            UNPAIR ;
                                            SWAP ;
                                            CDR ;
                                            DUP 14 ;
                                            GET 3 ;
                                            PAIR ;
                                            SWAP ;
                                            PAIR ;
                                            SWAP ;
                                            PAIR ;
                                            SWAP ;
                                            PAIR ;
                                            SWAP ;
                                            PAIR ;
                                            SWAP ;
                                            PAIR ;
                                            SOME ;
                                            SWAP ;
                                            UPDATE ;
                                            SWAP ;
                                            PAIR ;
                                            SWAP ;
                                            PAIR ;
                                            PAIR ;
                                            SWAP ;
                                            PAIR ;
                                            SWAP ;
                                            PAIR ;
                                            UNPAIR ;
                                            SWAP ;
                                            UNPAIR ;
                                            SWAP ;
                                            UNPAIR ;
                                            UNPAIR ;
                                            SWAP ;
                                            UNPAIR ;
                                            SWAP ;
                                            DUP ;
                                            DIG 7 ;
                                            GET 4 ;
                                            DUP ;
                                            DUG 2 ;
                                            GET ;
                                            IF_NONE { PUSH int 727 ; FAILWITH } {} ;
                                            UNPAIR ;
                                            SWAP ;
                                            UNPAIR ;
                                            SWAP ;
                                            UNPAIR ;
                                            SWAP ;
                                            UNPAIR ;
                                            SWAP ;
                                            UNPAIR ;
                                            SWAP ;
                                            UNPAIR ;
                                            SWAP ;
                                            CDR ;
                                            PUSH bool False ;
                                            PAIR ;
                                            SWAP ;
                                            PAIR ;
                                            SWAP ;
                                            PAIR ;
                                            SWAP ;
                                            PAIR ;
                                            SWAP ;
                                            PAIR ;
                                            SWAP ;
                                            PAIR ;
                                            SWAP ;
                                            PAIR ;
                                            SOME ;
                                            SWAP ;
                                            UPDATE ;
                                            SWAP ;
                                            PAIR ;
                                            SWAP ;
                                            PAIR ;
                                            PAIR ;
                                            SWAP ;
                                            PAIR ;
                                            SWAP ;
                                            PAIR ;
                                            DUG 3 }
                                          { DROP } } ;
                                DROP } ;
                         DIG 2 ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         SWAP ;
                         DUP ;
                         DUP 9 ;
                         CDR ;
                         DUP ;
                         DUG 2 ;
                         GET ;
                         IF_NONE { PUSH int 609 ; FAILWITH } {} ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         SWAP ;
                         CDR ;
                         PUSH bool False ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         SOME ;
                         SWAP ;
                         UPDATE ;
                         SWAP ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         UNPAIR ;
                         UNPAIR ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         SWAP ;
                         NONE address ;
                         DIG 8 ;
                         CDR ;
                         UPDATE ;
                         SWAP ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         PAIR ;
                         PAIR ;
                         SWAP }
                       { IF_LEFT
                           { SWAP ;
                             DUP ;
                             DUG 2 ;
                             CAR ;
                             CAR ;
                             CDR ;
                             CDR ;
                             CDR ;
                             SWAP ;
                             DUP ;
                             DUG 2 ;
                             CDR ;
                             MEM ;
                             IF { PUSH string "WrongCondition: ~ (self.data.auctions.contains(params.token_id))" ;
                                  FAILWITH }
                                {} ;
                             PUSH nat 1 ;
                             DUP 3 ;
                             CAR ;
                             CDR ;
                             CDR ;
                             CDR ;
                             CDR ;
                             DUP 3 ;
                             CDR ;
                             SENDER ;
                             PAIR ;
                             GET ;
                             IF_NONE { PUSH int 538 ; FAILWITH } {} ;
                             COMPARE ;
                             GE ;
                             IF {}
                                { PUSH string
                                       "WrongCondition: self.data.ledger[(sp.set_type_expr(sp.sender, sp.TAddress), sp.set_type_expr(params.token_id, sp.TNat))].balance >= 1" ;
                                  FAILWITH } ;
                             SWAP ;
                             UNPAIR ;
                             SWAP ;
                             UNPAIR ;
                             SWAP ;
                             UNPAIR ;
                             UNPAIR ;
                             SWAP ;
                             UNPAIR ;
                             SWAP ;
                             DUP ;
                             DUP 8 ;
                             CDR ;
                             DUP ;
                             DUG 2 ;
                             GET ;
                             IF_NONE { PUSH int 539 ; FAILWITH } {} ;
                             UNPAIR ;
                             SWAP ;
                             UNPAIR ;
                             SWAP ;
                             UNPAIR ;
                             SWAP ;
                             CDR ;
                             DUP 12 ;
                             CAR ;
                             PAIR ;
                             SWAP ;
                             PAIR ;
                             SWAP ;
                             PAIR ;
                             SWAP ;
                             PAIR ;
                             SOME ;
                             SWAP ;
                             UPDATE ;
                             SWAP ;
                             PAIR ;
                             SWAP ;
                             PAIR ;
                             PAIR ;
                             SWAP ;
                             PAIR ;
                             SWAP ;
                             PAIR ;
                             UNPAIR ;
                             SWAP ;
                             UNPAIR ;
                             SWAP ;
                             UNPAIR ;
                             UNPAIR ;
                             SWAP ;
                             UNPAIR ;
                             SWAP ;
                             DUP ;
                             DIG 7 ;
                             CDR ;
                             DUP ;
                             DUG 2 ;
                             GET ;
                             IF_NONE { PUSH int 540 ; FAILWITH } {} ;
                             UNPAIR ;
                             SWAP ;
                             UNPAIR ;
                             SWAP ;
                             UNPAIR ;
                             SWAP ;
                             UNPAIR ;
                             SWAP ;
                             UNPAIR ;
                             SWAP ;
                             UNPAIR ;
                             SWAP ;
                             CDR ;
                             PUSH bool True ;
                             PAIR ;
                             SWAP ;
                             PAIR ;
                             SWAP ;
                             PAIR ;
                             SWAP ;
                             PAIR ;
                             SWAP ;
                             PAIR ;
                             SWAP ;
                             PAIR ;
                             SWAP ;
                             PAIR ;
                             SOME ;
                             SWAP ;
                             UPDATE ;
                             SWAP ;
                             PAIR ;
                             SWAP ;
                             PAIR ;
                             PAIR ;
                             SWAP ;
                             PAIR ;
                             SWAP ;
                             PAIR ;
                             NIL operation }
                           { DUP ;
                             CAR ;
                             CDR ;
                             CDR ;
                             CAR ;
                             PUSH nat 1 ;
                             SWAP ;
                             COMPARE ;
                             GE ;
                             IF {} { PUSH string "WrongCondition: params.editions >= 1" ; FAILWITH } ;
                             SWAP ;
                             DUP ;
                             DUG 2 ;
                             CDR ;
                             CAR ;
                             CAR ;
                             CAR ;
                             SWAP ;
                             DUP ;
                             DUG 2 ;
                             CAR ;
                             CDR ;
                             CDR ;
                             CAR ;
                             COMPARE ;
                             LE ;
                             IF {}
                                { PUSH string "WrongCondition: params.editions <= self.data.max_editions" ;
                                  FAILWITH } ;
                             SWAP ;
                             DUP ;
                             DUG 2 ;
                             CDR ;
                             CAR ;
                             CAR ;
                             CDR ;
                             SWAP ;
                             DUP ;
                             DUG 2 ;
                             CAR ;
                             CDR ;
                             CAR ;
                             CDR ;
                             COMPARE ;
                             LE ;
                             IF {}
                                { PUSH string "WrongCondition: params.creator_royalty <= self.data.max_royalty" ;
                                  FAILWITH } ;
                             DUP ;
                             CAR ;
                             CDR ;
                             CDR ;
                             CAR ;
                             PUSH nat 1 ;
                             COMPARE ;
                             EQ ;
                             IF { DUP ;
                                  CAR ;
                                  CAR ;
                                  CDR ;
                                  CAR ;
                                  PUSH nat 0 ;
                                  COMPARE ;
                                  EQ ;
                                  IF {} { PUSH string "WrongCondition: params.collection_id == 0" ; FAILWITH } }
                                { SWAP ;
                                  DUP ;
                                  DUG 2 ;
                                  CAR ;
                                  CAR ;
                                  CAR ;
                                  CDR ;
                                  SWAP ;
                                  DUP ;
                                  DUG 2 ;
                                  CAR ;
                                  CAR ;
                                  CDR ;
                                  CAR ;
                                  COMPARE ;
                                  LT ;
                                  IF { PUSH string "collection_id_exists" ; FAILWITH } {} ;
                                  SWAP ;
                                  DUP ;
                                  CAR ;
                                  CDR ;
                                  CDR ;
                                  CAR ;
                                  SWAP ;
                                  DUP ;
                                  DUG 3 ;
                                  CAR ;
                                  CAR ;
                                  CAR ;
                                  CDR ;
                                  ADD ;
                                  SWAP ;
                                  DUP ;
                                  DUG 2 ;
                                  CAR ;
                                  CAR ;
                                  CDR ;
                                  CAR ;
                                  COMPARE ;
                                  LT ;
                                  IF {} { PUSH string "refer all_collections" ; FAILWITH } } ;
                             DUP ;
                             GET 7 ;
                             NIL string ;
                             PUSH nat 0 ;
                             DUP 3 ;
                             COMPARE ;
                             EQ ;
                             IF { PUSH string "0" ; CONS } {} ;
                             PUSH nat 0 ;
                             DUP 3 ;
                             COMPARE ;
                             GT ;
                             LOOP { PUSH (map nat string)
                                         { Elt 0 "0" ;
                                           Elt 1 "1" ;
                                           Elt 2 "2" ;
                                           Elt 3 "3" ;
                                           Elt 4 "4" ;
                                           Elt 5 "5" ;
                                           Elt 6 "6" ;
                                           Elt 7 "7" ;
                                           Elt 8 "8" ;
                                           Elt 9 "9" } ;
                                    PUSH nat 10 ;
                                    DUP 4 ;
                                    EDIV ;
                                    IF_NONE { PUSH int 857 ; FAILWITH } { CDR } ;
                                    GET ;
                                    IF_NONE { PUSH int 857 ; FAILWITH } {} ;
                                    CONS ;
                                    PUSH nat 10 ;
                                    DIG 2 ;
                                    EDIV ;
                                    IF_NONE { PUSH int 858 ; FAILWITH } { CAR } ;
                                    SWAP ;
                                    PUSH nat 0 ;
                                    DUP 3 ;
                                    COMPARE ;
                                    GT } ;
                             NIL operation ;
                             DUP 5 ;
                             CAR ;
                             CDR ;
                             CDR ;
                             CDR ;
                             CAR ;
                             CONTRACT %add_fa2_token
                               (pair (string %ipfs_hash)
                                     (pair (map %metadata string string) (address %nft_contract))) ;
                             IF_NONE { PUSH int 837 ; FAILWITH } {} ;
                             PUSH mutez 0 ;
                             SELF_ADDRESS ;
                             EMPTY_MAP string string ;
                             DUP 6 ;
                             CONCAT ;
                             SOME ;
                             PUSH string "token_id" ;
                             UPDATE ;
                             PUSH (option string) (Some "FA2") ;
                             PUSH string "standard" ;
                             UPDATE ;
                             PAIR %metadata %nft_contract ;
                             DUP 7 ;
                             CAR ;
                             CDR ;
                             CDR ;
                             CDR ;
                             PAIR %ipfs_hash ;
                             TRANSFER_TOKENS ;
                             CONS ;
                             DUP 5 ;
                             UNPAIR ;
                             UNPAIR ;
                             UNPAIR ;
                             CAR ;
                             DIG 8 ;
                             CAR ;
                             CAR ;
                             CAR ;
                             CDR ;
                             DUP ;
                             PUSH nat 1 ;
                             DUP 11 ;
                             CAR ;
                             CAR ;
                             CDR ;
                             CAR ;
                             ADD ;
                             DUP ;
                             DUG 2 ;
                             COMPARE ;
                             LE ;
                             IF { DROP } { SWAP ; DROP } ;
                             SWAP ;
                             PAIR ;
                             PAIR ;
                             PAIR ;
                             PAIR ;
                             UNPAIR ;
                             SWAP ;
                             UNPAIR ;
                             SWAP ;
                             UNPAIR ;
                             SWAP ;
                             UNPAIR ;
                             SWAP ;
                             CAR ;
                             PUSH nat 0 ;
                             SWAP ;
                             PAIR ;
                             SWAP ;
                             PAIR ;
                             SWAP ;
                             PAIR ;
                             SWAP ;
                             PAIR ;
                             SWAP ;
                             PAIR ;
                             DUG 4 ;
                             DIG 3 ;
                             DUP ;
                             CAR ;
                             CDR ;
                             CDR ;
                             CAR ;
                             SWAP ;
                             DUP ;
                             DUG 5 ;
                             GET 7 ;
                             ADD ;
                             DUP 5 ;
                             GET 7 ;
                             DUP ;
                             DUP 3 ;
                             COMPARE ;
                             GT ;
                             LOOP { DIG 6 ;
                                    UNPAIR ;
                                    SWAP ;
                                    UNPAIR ;
                                    SWAP ;
                                    UNPAIR ;
                                    SWAP ;
                                    UNPAIR ;
                                    SWAP ;
                                    UNPAIR ;
                                    SWAP ;
                                    PUSH nat 1 ;
                                    ADD ;
                                    SWAP ;
                                    PAIR ;
                                    SWAP ;
                                    PAIR ;
                                    SWAP ;
                                    PAIR ;
                                    SWAP ;
                                    PAIR ;
                                    SWAP ;
                                    PAIR ;
                                    DUP ;
                                    DUG 7 ;
                                    CAR ;
                                    CAR ;
                                    CDR ;
                                    CAR ;
                                    SWAP ;
                                    DUP ;
                                    DUG 2 ;
                                    COMPARE ;
                                    LT ;
                                    IF { PUSH string "WrongCondition: ~ (token_id < self.data.all_tokens)" ;
                                         FAILWITH }
                                       {} ;
                                    DUP 7 ;
                                    CDR ;
                                    CDR ;
                                    CAR ;
                                    CDR ;
                                    CDR ;
                                    SWAP ;
                                    DUP ;
                                    DUG 2 ;
                                    MEM ;
                                    IF { PUSH string "WrongCondition: ~ (self.data.tokens.contains(token_id))" ;
                                         FAILWITH }
                                       {} ;
                                    DIG 6 ;
                                    DUP ;
                                    CAR ;
                                    CDR ;
                                    CDR ;
                                    CAR ;
                                    SWAP ;
                                    DUP ;
                                    DUG 8 ;
                                    CAR ;
                                    CAR ;
                                    CDR ;
                                    CAR ;
                                    ADD ;
                                    DUP 7 ;
                                    GET 7 ;
                                    COMPARE ;
                                    LT ;
                                    IF {} { PUSH string "refer all_tokens" ; FAILWITH } ;
                                    DUP 7 ;
                                    UNPAIR ;
                                    UNPAIR ;
                                    UNPAIR ;
                                    SWAP ;
                                    CDR ;
                                    DIG 10 ;
                                    CAR ;
                                    CAR ;
                                    CDR ;
                                    CAR ;
                                    DUP ;
                                    PUSH nat 1 ;
                                    DUP 8 ;
                                    ADD ;
                                    DUP ;
                                    DUG 2 ;
                                    COMPARE ;
                                    LE ;
                                    IF { DROP } { SWAP ; DROP } ;
                                    PAIR ;
                                    SWAP ;
                                    PAIR ;
                                    PAIR ;
                                    PAIR ;
                                    DUP ;
                                    DUG 7 ;
                                    CAR ;
                                    CDR ;
                                    CDR ;
                                    CDR ;
                                    CDR ;
                                    SWAP ;
                                    DUP ;
                                    DUG 2 ;
                                    SENDER ;
                                    PAIR ;
                                    MEM ;
                                    IF {}
                                       { DIG 6 ;
                                         UNPAIR ;
                                         UNPAIR ;
                                         SWAP ;
                                         UNPAIR ;
                                         SWAP ;
                                         UNPAIR ;
                                         SWAP ;
                                         UNPAIR ;
                                         SWAP ;
                                         PUSH (option nat) (Some 1) ;
                                         DUP 8 ;
                                         SENDER ;
                                         PAIR ;
                                         UPDATE ;
                                         SWAP ;
                                         PAIR ;
                                         SWAP ;
                                         PAIR ;
                                         SWAP ;
                                         PAIR ;
                                         SWAP ;
                                         PAIR ;
                                         PAIR ;
                                         DUG 6 } ;
                                    PUSH nat 1 ;
                                    DUP 7 ;
                                    CAR ;
                                    CDR ;
                                    CDR ;
                                    CAR ;
                                    COMPARE ;
                                    GT ;
                                    IF { DUP 7 ;
                                         CAR ;
                                         CDR ;
                                         CAR ;
                                         CDR ;
                                         DUP 7 ;
                                         CAR ;
                                         CAR ;
                                         CDR ;
                                         CAR ;
                                         MEM ;
                                         IF { DUP 7 ;
                                              UNPAIR ;
                                              UNPAIR ;
                                              SWAP ;
                                              UNPAIR ;
                                              UNPAIR ;
                                              SWAP ;
                                              DIG 11 ;
                                              CAR ;
                                              CDR ;
                                              CAR ;
                                              CDR ;
                                              DUP 12 ;
                                              CAR ;
                                              CAR ;
                                              CDR ;
                                              CAR ;
                                              GET ;
                                              IF_NONE { PUSH int 923 ; FAILWITH } {} ;
                                              DUP 7 ;
                                              CONS ;
                                              SOME ;
                                              DUP 12 ;
                                              CAR ;
                                              CAR ;
                                              CDR ;
                                              CAR ;
                                              UPDATE ;
                                              SWAP ;
                                              PAIR ;
                                              PAIR ;
                                              SWAP ;
                                              PAIR ;
                                              PAIR ;
                                              DUG 6 }
                                            { DIG 6 ;
                                              UNPAIR ;
                                              UNPAIR ;
                                              SWAP ;
                                              UNPAIR ;
                                              UNPAIR ;
                                              SWAP ;
                                              NIL nat ;
                                              DUP 7 ;
                                              CONS ;
                                              SOME ;
                                              DUP 12 ;
                                              CAR ;
                                              CAR ;
                                              CDR ;
                                              CAR ;
                                              UPDATE ;
                                              SWAP ;
                                              PAIR ;
                                              PAIR ;
                                              SWAP ;
                                              PAIR ;
                                              PAIR ;
                                              DUG 6 } }
                                       {} ;
                                    DIG 6 ;
                                    UNPAIR ;
                                    SWAP ;
                                    UNPAIR ;
                                    SWAP ;
                                    UNPAIR ;
                                    UNPAIR ;
                                    SWAP ;
                                    UNPAIR ;
                                    EMPTY_MAP string bytes ;
                                    DUP 13 ;
                                    GET 8 ;
                                    SOME ;
                                    PUSH string "" ;
                                    UPDATE ;
                                    PUSH (option bytes) (Some 0x30) ;
                                    PUSH string "decimals" ;
                                    UPDATE ;
                                    DUP 8 ;
                                    PAIR %token_id %token_info ;
                                    SOME ;
                                    DUP 8 ;
                                    UPDATE ;
                                    PAIR ;
                                    SWAP ;
                                    PAIR ;
                                    PAIR ;
                                    SWAP ;
                                    PAIR ;
                                    SWAP ;
                                    PAIR ;
                                    DUP ;
                                    DUG 7 ;
                                    UNPAIR ;
                                    SWAP ;
                                    UNPAIR ;
                                    SWAP ;
                                    UNPAIR ;
                                    UNPAIR ;
                                    SWAP ;
                                    UNPAIR ;
                                    SWAP ;
                                    DUP 12 ;
                                    CAR ;
                                    CDR ;
                                    CDR ;
                                    CAR ;
                                    DIG 13 ;
                                    GET 10 ;
                                    PAIR %edition_number %editions ;
                                    DUP 13 ;
                                    CAR ;
                                    CDR ;
                                    CAR ;
                                    CDR ;
                                    PAIR %creator_royalty ;
                                    SENDER ;
                                    PAIR %creator ;
                                    DUP 13 ;
                                    CAR ;
                                    CAR ;
                                    CDR ;
                                    CAR ;
                                    PAIR %collection_id ;
                                    PUSH bool False ;
                                    PAIR %on_auction ;
                                    DUP 13 ;
                                    CDR ;
                                    CAR ;
                                    CDR ;
                                    CDR ;
                                    PAIR %on_sale ;
                                    SENDER ;
                                    PAIR %owner ;
                                    DUP 13 ;
                                    CAR ;
                                    CDR ;
                                    CDR ;
                                    CDR ;
                                    PAIR %ipfs_hash ;
                                    DUP 13 ;
                                    CDR ;
                                    CDR ;
                                    CAR ;
                                    CAR ;
                                    PAIR %price ;
                                    DUP 8 ;
                                    PAIR %token_id ;
                                    EMPTY_MAP string string ;
                                    DUP 14 ;
                                    CAR ;
                                    CAR ;
                                    CAR ;
                                    SOME ;
                                    PUSH string "category" ;
                                    UPDATE ;
                                    DUP 14 ;
                                    CDR ;
                                    CAR ;
                                    CAR ;
                                    SOME ;
                                    PUSH string "keywords" ;
                                    UPDATE ;
                                    DUP 14 ;
                                    CAR ;
                                    CDR ;
                                    CAR ;
                                    CAR ;
                                    SOME ;
                                    PUSH string "creator_name" ;
                                    UPDATE ;
                                    DUP 14 ;
                                    CDR ;
                                    CAR ;
                                    CDR ;
                                    CAR ;
                                    SOME ;
                                    PUSH string "name" ;
                                    UPDATE ;
                                    DUP 14 ;
                                    CDR ;
                                    CDR ;
                                    CAR ;
                                    CDR ;
                                    SOME ;
                                    PUSH string "symbol" ;
                                    UPDATE ;
                                    DUP 14 ;
                                    CAR ;
                                    CAR ;
                                    CDR ;
                                    CDR ;
                                    SOME ;
                                    PUSH string "collection_name" ;
                                    UPDATE ;
                                    PAIR %extras ;
                                    PUSH nat 0 ;
                                    PAIR %decimals ;
                                    SOME ;
                                    DUP 8 ;
                                    UPDATE ;
                                    SWAP ;
                                    PAIR ;
                                    SWAP ;
                                    PAIR ;
                                    PAIR ;
                                    SWAP ;
                                    PAIR ;
                                    SWAP ;
                                    PAIR ;
                                    DUG 6 ;
                                    PUSH nat 1 ;
                                    ADD ;
                                    DUP ;
                                    DUP 3 ;
                                    COMPARE ;
                                    GT } ;
                             DROP 2 ;
                             SWAP ;
                             DROP ;
                             SWAP ;
                             DROP ;
                             SWAP ;
                             DROP } } }
                   { IF_LEFT
                       { SWAP ;
                         DUP ;
                         DUG 2 ;
                         CAR ;
                         CAR ;
                         CDR ;
                         CDR ;
                         CAR ;
                         SENDER ;
                         COMPARE ;
                         EQ ;
                         IF {}
                            { PUSH string "WrongCondition: sp.sender == self.data.auction_factory" ;
                              FAILWITH } ;
                         SWAP ;
                         DUP ;
                         DUG 2 ;
                         CDR ;
                         CDR ;
                         CAR ;
                         CDR ;
                         CDR ;
                         SWAP ;
                         DUP ;
                         DUG 2 ;
                         GET 4 ;
                         MEM ;
                         IF {}
                            { PUSH string "WrongCondition: self.data.tokens.contains(params.token_id)" ;
                              FAILWITH } ;
                         PUSH nat 1 ;
                         DUP 3 ;
                         CAR ;
                         CDR ;
                         CDR ;
                         CDR ;
                         CDR ;
                         DUP 3 ;
                         GET 4 ;
                         SOURCE ;
                         PAIR ;
                         GET ;
                         IF_NONE { PUSH int 624 ; FAILWITH } {} ;
                         COMPARE ;
                         GE ;
                         IF {}
                            { PUSH string
                                   "WrongCondition: self.data.ledger[(sp.set_type_expr(sp.source, sp.TAddress), sp.set_type_expr(params.token_id, sp.TNat))].balance >= 1" ;
                              FAILWITH } ;
                         SWAP ;
                         DUP ;
                         DUG 2 ;
                         CAR ;
                         CAR ;
                         CDR ;
                         CDR ;
                         CDR ;
                         SWAP ;
                         DUP ;
                         DUG 2 ;
                         GET 4 ;
                         MEM ;
                         IF { PUSH string "WrongCondition: ~ (self.data.auctions.contains(params.token_id))" ;
                              FAILWITH }
                            {} ;
                         SWAP ;
                         UNPAIR ;
                         UNPAIR ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         SWAP ;
                         DUP 7 ;
                         CAR ;
                         SOME ;
                         DUP 8 ;
                         GET 4 ;
                         UPDATE ;
                         SWAP ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         PAIR ;
                         PAIR ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         SWAP ;
                         DUP ;
                         DUP 8 ;
                         GET 4 ;
                         DUP ;
                         DUG 2 ;
                         GET ;
                         IF_NONE { PUSH int 629 ; FAILWITH } {} ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         SWAP ;
                         CDR ;
                         DUP 12 ;
                         GET 3 ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         SOME ;
                         SWAP ;
                         UPDATE ;
                         SWAP ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         SWAP ;
                         DUP ;
                         DIG 7 ;
                         GET 4 ;
                         DUP ;
                         DUG 2 ;
                         GET ;
                         IF_NONE { PUSH int 630 ; FAILWITH } {} ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         SWAP ;
                         CDR ;
                         PUSH bool True ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         SOME ;
                         SWAP ;
                         UPDATE ;
                         SWAP ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         NIL operation }
                       { IF_LEFT
                           { NIL operation ;
                             DUP 3 ;
                             CAR ;
                             CAR ;
                             CDR ;
                             CDR ;
                             CDR ;
                             DIG 2 ;
                             GET ;
                             IF_NONE { PUSH int 575 ; FAILWITH } {} ;
                             CONTRACT %resolve_auction unit ;
                             IF_NONE { PUSH int 575 ; FAILWITH } {} ;
                             AMOUNT ;
                             UNIT ;
                             TRANSFER_TOKENS ;
                             CONS }
                           { SWAP ;
                             DUP ;
                             DUG 2 ;
                             CAR ;
                             CAR ;
                             CAR ;
                             CAR ;
                             SENDER ;
                             COMPARE ;
                             EQ ;
                             IF {}
                                { PUSH string "WrongCondition: sp.sender == self.data.administrator" ;
                                  FAILWITH } ;
                             SWAP ;
                             UNPAIR ;
                             UNPAIR ;
                             UNPAIR ;
                             CDR ;
                             DIG 4 ;
                             PAIR ;
                             PAIR ;
                             PAIR ;
                             PAIR ;
                             NIL operation } } } } }
           { IF_LEFT
               { IF_LEFT
                   { IF_LEFT
                       { SWAP ;
                         DUP ;
                         DUG 2 ;
                         CAR ;
                         CAR ;
                         CAR ;
                         CAR ;
                         SENDER ;
                         COMPARE ;
                         EQ ;
                         IF {}
                            { PUSH string "WrongCondition: sp.sender == self.data.administrator" ;
                              FAILWITH } ;
                         SWAP ;
                         UNPAIR ;
                         UNPAIR ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         SWAP ;
                         CDR ;
                         DIG 5 ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         PAIR ;
                         PAIR }
                       { SWAP ;
                         DUP ;
                         DUG 2 ;
                         CAR ;
                         CAR ;
                         CAR ;
                         CAR ;
                         SENDER ;
                         COMPARE ;
                         EQ ;
                         IF {}
                            { PUSH string "WrongCondition: sp.sender == self.data.administrator" ;
                              FAILWITH } ;
                         SWAP ;
                         UNPAIR ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         CDR ;
                         DIG 4 ;
                         PAIR ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         PAIR } }
                   { IF_LEFT
                       { SWAP ;
                         DUP ;
                         DUG 2 ;
                         CAR ;
                         CAR ;
                         CAR ;
                         CAR ;
                         SENDER ;
                         COMPARE ;
                         EQ ;
                         IF {}
                            { PUSH string "WrongCondition: sp.sender == self.data.administrator" ;
                              FAILWITH } ;
                         SWAP ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         DIG 5 ;
                         SOME ;
                         PUSH string "" ;
                         UPDATE ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         PAIR ;
                         SWAP ;
                         PAIR }
                       { IF_LEFT
                           { SWAP ;
                             DUP ;
                             DUG 2 ;
                             CAR ;
                             CAR ;
                             CAR ;
                             CAR ;
                             SENDER ;
                             COMPARE ;
                             EQ ;
                             IF {}
                                { PUSH string "WrongCondition: sp.sender == self.data.administrator" ;
                                  FAILWITH } ;
                             SWAP ;
                             UNPAIR ;
                             UNPAIR ;
                             SWAP ;
                             UNPAIR ;
                             SWAP ;
                             UNPAIR ;
                             SWAP ;
                             CDR ;
                             DIG 5 ;
                             PAIR ;
                             SWAP ;
                             PAIR ;
                             SWAP ;
                             PAIR ;
                             SWAP ;
                             PAIR ;
                             PAIR }
                           { SWAP ;
                             DUP ;
                             DUG 2 ;
                             CAR ;
                             CAR ;
                             CAR ;
                             CAR ;
                             SENDER ;
                             COMPARE ;
                             EQ ;
                             IF {}
                                { PUSH string "WrongCondition: sp.sender == self.data.administrator" ;
                                  FAILWITH } ;
                             SWAP ;
                             UNPAIR ;
                             SWAP ;
                             UNPAIR ;
                             UNPAIR ;
                             CDR ;
                             DIG 4 ;
                             PAIR ;
                             PAIR ;
                             PAIR ;
                             SWAP ;
                             PAIR } } } }
               { IF_LEFT
                   { IF_LEFT
                       { SWAP ;
                         DUP ;
                         DUG 2 ;
                         CAR ;
                         CAR ;
                         CAR ;
                         CAR ;
                         SENDER ;
                         COMPARE ;
                         EQ ;
                         IF {}
                            { PUSH string "WrongCondition: sp.sender == self.data.administrator" ;
                              FAILWITH } ;
                         SWAP ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         UNPAIR ;
                         CAR ;
                         DIG 4 ;
                         SWAP ;
                         PAIR ;
                         PAIR ;
                         PAIR ;
                         SWAP ;
                         PAIR }
                       { IF_LEFT
                           { PUSH nat 1 ;
                             DUP 3 ;
                             CAR ;
                             CDR ;
                             CDR ;
                             CDR ;
                             CDR ;
                             DUP 3 ;
                             CAR ;
                             SENDER ;
                             PAIR ;
                             GET ;
                             IF_NONE { PUSH int 520 ; FAILWITH } {} ;
                             COMPARE ;
                             GE ;
                             IF {} { PUSH string "FA2_NOT_OWNER" ; FAILWITH } ;
                             SWAP ;
                             UNPAIR ;
                             SWAP ;
                             UNPAIR ;
                             SWAP ;
                             UNPAIR ;
                             UNPAIR ;
                             SWAP ;
                             UNPAIR ;
                             DUP ;
                             DUP 8 ;
                             CAR ;
                             DUP ;
                             DUG 2 ;
                             GET ;
                             IF_NONE { PUSH int 522 ; FAILWITH } {} ;
                             UNPAIR ;
                             SWAP ;
                             DIG 9 ;
                             CDR ;
                             SOME ;
                             PUSH string "" ;
                             UPDATE ;
                             SWAP ;
                             PAIR ;
                             SOME ;
                             SWAP ;
                             UPDATE ;
                             PAIR ;
                             SWAP ;
                             PAIR ;
                             PAIR ;
                             SWAP ;
                             PAIR ;
                             SWAP ;
                             PAIR }
                           { SWAP ;
                             DUP ;
                             DUG 2 ;
                             CAR ;
                             CAR ;
                             CAR ;
                             CAR ;
                             SENDER ;
                             COMPARE ;
                             EQ ;
                             IF {}
                                { PUSH string "WrongCondition: sp.sender == self.data.administrator" ;
                                  FAILWITH } ;
                             SWAP ;
                             UNPAIR ;
                             SWAP ;
                             UNPAIR ;
                             SWAP ;
                             UNPAIR ;
                             SWAP ;
                             CDR ;
                             DIG 4 ;
                             PAIR ;
                             SWAP ;
                             PAIR ;
                             SWAP ;
                             PAIR ;
                             SWAP ;
                             PAIR } } }
                   { IF_LEFT
                       { SWAP ;
                         DUP ;
                         DUG 2 ;
                         CAR ;
                         CAR ;
                         CAR ;
                         CAR ;
                         SENDER ;
                         COMPARE ;
                         EQ ;
                         IF {}
                            { PUSH string "WrongCondition: sp.sender == self.data.administrator" ;
                              FAILWITH } ;
                         SWAP ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         SWAP ;
                         UNPAIR ;
                         SWAP ;
                         CDR ;
                         DIG 5 ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         SWAP ;
                         PAIR ;
                         SWAP ;
                         PAIR }
                       { IF_LEFT
                           { DUP ;
                             ITER { DUP ;
                                    CDR ;
                                    ITER { SENDER ;
                                           DUP 3 ;
                                           CAR ;
                                           COMPARE ;
                                           EQ ;
                                           IF { PUSH bool True }
                                              { DUP 4 ;
                                                CDR ;
                                                CAR ;
                                                CDR ;
                                                CDR ;
                                                CDR ;
                                                SWAP ;
                                                DUP ;
                                                DUG 2 ;
                                                GET 3 ;
                                                SENDER ;
                                                PAIR %operator %token_id ;
                                                DUP 4 ;
                                                CAR ;
                                                PAIR %owner ;
                                                MEM } ;
                                           IF {} { PUSH string "FA2_NOT_OPERATOR" ; FAILWITH } ;
                                           DUP 4 ;
                                           CAR ;
                                           CAR ;
                                           CDR ;
                                           CDR ;
                                           CDR ;
                                           SWAP ;
                                           DUP ;
                                           DUG 2 ;
                                           GET 3 ;
                                           MEM ;
                                           IF { PUSH string "WrongCondition: ~ (self.data.auctions.contains(trx.token_id))" ;
                                                FAILWITH }
                                              {} ;
                                           NIL (pair (address %from_)
                                                     (list %txs (pair (nat %amount) (pair (address %to_) (nat %token_id))))) ;
                                           NIL (pair (nat %amount) (pair (address %to_) (nat %token_id))) ;
                                           DIG 2 ;
                                           DUP ;
                                           GET 3 ;
                                           SWAP ;
                                           DUP ;
                                           DUG 4 ;
                                           CAR ;
                                           PAIR %to_ %token_id ;
                                           DUP 4 ;
                                           GET 4 ;
                                           PAIR %amount ;
                                           CONS ;
                                           DUP 4 ;
                                           CAR ;
                                           PAIR %from_ %txs ;
                                           CONS ;
                                           ITER { DUP ;
                                                  CDR ;
                                                  ITER { DUP ;
                                                         CAR ;
                                                         PUSH nat 0 ;
                                                         COMPARE ;
                                                         LT ;
                                                         IF {} { PUSH string "TRANSFER_OF_ZERO" ; FAILWITH } ;
                                                         DUP 6 ;
                                                         CDR ;
                                                         CDR ;
                                                         CAR ;
                                                         CDR ;
                                                         CDR ;
                                                         SWAP ;
                                                         DUP ;
                                                         DUG 2 ;
                                                         GET 4 ;
                                                         MEM ;
                                                         IF {} { PUSH string "FA2_TOKEN_UNDEFINED" ; FAILWITH } ;
                                                         DUP ;
                                                         CAR ;
                                                         PUSH nat 0 ;
                                                         COMPARE ;
                                                         LT ;
                                                         IF { DUP ;
                                                              CAR ;
                                                              DUP 7 ;
                                                              CAR ;
                                                              CDR ;
                                                              CDR ;
                                                              CDR ;
                                                              CDR ;
                                                              DUP 3 ;
                                                              GET 4 ;
                                                              DUP 5 ;
                                                              CAR ;
                                                              PAIR ;
                                                              GET ;
                                                              IF_NONE { PUSH int 710 ; FAILWITH } {} ;
                                                              COMPARE ;
                                                              GE ;
                                                              IF {} { PUSH string "FA2_INSUFFICIENT_BALANCE" ; FAILWITH } ;
                                                              DUP 6 ;
                                                              UNPAIR ;
                                                              UNPAIR ;
                                                              SWAP ;
                                                              UNPAIR ;
                                                              SWAP ;
                                                              UNPAIR ;
                                                              SWAP ;
                                                              UNPAIR ;
                                                              SWAP ;
                                                              DUP ;
                                                              DUP 8 ;
                                                              GET 4 ;
                                                              DUP 10 ;
                                                              CAR ;
                                                              PAIR ;
                                                              DUP ;
                                                              DUG 2 ;
                                                              GET ;
                                                              IF_NONE { PUSH int 714 ; FAILWITH } { DROP } ;
                                                              DUP 8 ;
                                                              CAR ;
                                                              DIG 13 ;
                                                              CAR ;
                                                              CDR ;
                                                              CDR ;
                                                              CDR ;
                                                              CDR ;
                                                              DUP 10 ;
                                                              GET 4 ;
                                                              DUP 12 ;
                                                              CAR ;
                                                              PAIR ;
                                                              GET ;
                                                              IF_NONE { PUSH int 714 ; FAILWITH } {} ;
                                                              SUB ;
                                                              ISNAT ;
                                                              IF_NONE { PUSH int 714 ; FAILWITH } {} ;
                                                              SOME ;
                                                              SWAP ;
                                                              UPDATE ;
                                                              SWAP ;
                                                              PAIR ;
                                                              SWAP ;
                                                              PAIR ;
                                                              SWAP ;
                                                              PAIR ;
                                                              SWAP ;
                                                              PAIR ;
                                                              PAIR ;
                                                              DUP ;
                                                              DUG 6 ;
                                                              CAR ;
                                                              CDR ;
                                                              CDR ;
                                                              CDR ;
                                                              CDR ;
                                                              SWAP ;
                                                              DUP ;
                                                              GET 4 ;
                                                              SWAP ;
                                                              DUP ;
                                                              DUG 3 ;
                                                              GET 3 ;
                                                              PAIR ;
                                                              MEM ;
                                                              IF { DUP 6 ;
                                                                   UNPAIR ;
                                                                   UNPAIR ;
                                                                   SWAP ;
                                                                   UNPAIR ;
                                                                   SWAP ;
                                                                   UNPAIR ;
                                                                   SWAP ;
                                                                   UNPAIR ;
                                                                   SWAP ;
                                                                   DUP ;
                                                                   DIG 7 ;
                                                                   DUP ;
                                                                   GET 4 ;
                                                                   SWAP ;
                                                                   DUP ;
                                                                   DUG 9 ;
                                                                   GET 3 ;
                                                                   PAIR ;
                                                                   DUP ;
                                                                   DUG 2 ;
                                                                   GET ;
                                                                   IF_NONE { PUSH int 717 ; FAILWITH } { DROP } ;
                                                                   DUP 8 ;
                                                                   CAR ;
                                                                   DIG 13 ;
                                                                   CAR ;
                                                                   CDR ;
                                                                   CDR ;
                                                                   CDR ;
                                                                   CDR ;
                                                                   DIG 9 ;
                                                                   DUP ;
                                                                   GET 4 ;
                                                                   SWAP ;
                                                                   DUP ;
                                                                   DUG 11 ;
                                                                   GET 3 ;
                                                                   PAIR ;
                                                                   GET ;
                                                                   IF_NONE { PUSH int 717 ; FAILWITH } {} ;
                                                                   ADD ;
                                                                   SOME ;
                                                                   SWAP ;
                                                                   UPDATE ;
                                                                   SWAP ;
                                                                   PAIR ;
                                                                   SWAP ;
                                                                   PAIR ;
                                                                   SWAP ;
                                                                   PAIR ;
                                                                   SWAP ;
                                                                   PAIR ;
                                                                   PAIR ;
                                                                   DUG 5 }
                                                                 { DIG 5 ;
                                                                   UNPAIR ;
                                                                   UNPAIR ;
                                                                   SWAP ;
                                                                   UNPAIR ;
                                                                   SWAP ;
                                                                   UNPAIR ;
                                                                   SWAP ;
                                                                   UNPAIR ;
                                                                   SWAP ;
                                                                   DUP 7 ;
                                                                   CAR ;
                                                                   SOME ;
                                                                   DIG 7 ;
                                                                   DUP ;
                                                                   GET 4 ;
                                                                   SWAP ;
                                                                   DUP ;
                                                                   DUG 9 ;
                                                                   GET 3 ;
                                                                   PAIR ;
                                                                   UPDATE ;
                                                                   SWAP ;
                                                                   PAIR ;
                                                                   SWAP ;
                                                                   PAIR ;
                                                                   SWAP ;
                                                                   PAIR ;
                                                                   SWAP ;
                                                                   PAIR ;
                                                                   PAIR ;
                                                                   DUG 5 } ;
                                                              DIG 5 ;
                                                              UNPAIR ;
                                                              SWAP ;
                                                              UNPAIR ;
                                                              SWAP ;
                                                              UNPAIR ;
                                                              UNPAIR ;
                                                              SWAP ;
                                                              UNPAIR ;
                                                              SWAP ;
                                                              DUP ;
                                                              DUP 8 ;
                                                              GET 4 ;
                                                              DUP ;
                                                              DUG 2 ;
                                                              GET ;
                                                              IF_NONE { PUSH int 724 ; FAILWITH } {} ;
                                                              UNPAIR ;
                                                              SWAP ;
                                                              UNPAIR ;
                                                              SWAP ;
                                                              UNPAIR ;
                                                              SWAP ;
                                                              UNPAIR ;
                                                              SWAP ;
                                                              UNPAIR ;
                                                              SWAP ;
                                                              CDR ;
                                                              DUP 14 ;
                                                              GET 3 ;
                                                              PAIR ;
                                                              SWAP ;
                                                              PAIR ;
                                                              SWAP ;
                                                              PAIR ;
                                                              SWAP ;
                                                              PAIR ;
                                                              SWAP ;
                                                              PAIR ;
                                                              SWAP ;
                                                              PAIR ;
                                                              SOME ;
                                                              SWAP ;
                                                              UPDATE ;
                                                              SWAP ;
                                                              PAIR ;
                                                              SWAP ;
                                                              PAIR ;
                                                              PAIR ;
                                                              SWAP ;
                                                              PAIR ;
                                                              SWAP ;
                                                              PAIR ;
                                                              UNPAIR ;
                                                              SWAP ;
                                                              UNPAIR ;
                                                              SWAP ;
                                                              UNPAIR ;
                                                              UNPAIR ;
                                                              SWAP ;
                                                              UNPAIR ;
                                                              SWAP ;
                                                              DUP ;
                                                              DIG 7 ;
                                                              GET 4 ;
                                                              DUP ;
                                                              DUG 2 ;
                                                              GET ;
                                                              IF_NONE { PUSH int 727 ; FAILWITH } {} ;
                                                              UNPAIR ;
                                                              SWAP ;
                                                              UNPAIR ;
                                                              SWAP ;
                                                              UNPAIR ;
                                                              SWAP ;
                                                              UNPAIR ;
                                                              SWAP ;
                                                              UNPAIR ;
                                                              SWAP ;
                                                              UNPAIR ;
                                                              SWAP ;
                                                              CDR ;
                                                              PUSH bool False ;
                                                              PAIR ;
                                                              SWAP ;
                                                              PAIR ;
                                                              SWAP ;
                                                              PAIR ;
                                                              SWAP ;
                                                              PAIR ;
                                                              SWAP ;
                                                              PAIR ;
                                                              SWAP ;
                                                              PAIR ;
                                                              SWAP ;
                                                              PAIR ;
                                                              SOME ;
                                                              SWAP ;
                                                              UPDATE ;
                                                              SWAP ;
                                                              PAIR ;
                                                              SWAP ;
                                                              PAIR ;
                                                              PAIR ;
                                                              SWAP ;
                                                              PAIR ;
                                                              SWAP ;
                                                              PAIR ;
                                                              DUG 4 }
                                                            { DROP } } ;
                                                  DROP } ;
                                           DROP } ;
                                    DROP } ;
                             DROP }
                           { DUP ;
                             ITER { IF_LEFT
                                      { DUP ;
                                        CAR ;
                                        SENDER ;
                                        COMPARE ;
                                        EQ ;
                                        IF {} { PUSH string "WrongCondition: arg.owner == sp.sender" ; FAILWITH } ;
                                        DIG 2 ;
                                        UNPAIR ;
                                        SWAP ;
                                        UNPAIR ;
                                        UNPAIR ;
                                        SWAP ;
                                        UNPAIR ;
                                        SWAP ;
                                        UNPAIR ;
                                        SWAP ;
                                        PUSH (option unit) (Some Unit) ;
                                        DIG 7 ;
                                        DUP ;
                                        GET 4 ;
                                        SWAP ;
                                        DUP ;
                                        DUG 9 ;
                                        GET 3 ;
                                        PAIR %operator %token_id ;
                                        DIG 8 ;
                                        CAR ;
                                        PAIR %owner ;
                                        UPDATE ;
                                        SWAP ;
                                        PAIR ;
                                        SWAP ;
                                        PAIR ;
                                        SWAP ;
                                        PAIR ;
                                        PAIR ;
                                        SWAP ;
                                        PAIR ;
                                        SWAP }
                                      { DUP ;
                                        CAR ;
                                        SENDER ;
                                        COMPARE ;
                                        EQ ;
                                        IF {} { PUSH string "WrongCondition: arg.owner == sp.sender" ; FAILWITH } ;
                                        DIG 2 ;
                                        UNPAIR ;
                                        SWAP ;
                                        UNPAIR ;
                                        UNPAIR ;
                                        SWAP ;
                                        UNPAIR ;
                                        SWAP ;
                                        UNPAIR ;
                                        SWAP ;
                                        NONE unit ;
                                        DIG 7 ;
                                        DUP ;
                                        GET 4 ;
                                        SWAP ;
                                        DUP ;
                                        DUG 9 ;
                                        GET 3 ;
                                        PAIR %operator %token_id ;
                                        DIG 8 ;
                                        CAR ;
                                        PAIR %owner ;
                                        UPDATE ;
                                        SWAP ;
                                        PAIR ;
                                        SWAP ;
                                        PAIR ;
                                        SWAP ;
                                        PAIR ;
                                        PAIR ;
                                        SWAP ;
                                        PAIR ;
                                        SWAP } } ;
                             DROP } } } } ;
             NIL operation } ;
         NIL operation ;
         SWAP ;
         ITER { CONS } ;
         PAIR } }