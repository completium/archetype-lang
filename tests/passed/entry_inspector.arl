archetype entry_inspector

variable total : nat = 0

variable token : address = @KT1Nt4mkc3p5gqykuBbFyWiz7d7nmJNhkT8V

entry balanceInquiry(v : nat) { total := v }

entry exec () {
  var gbopt : option<entrysig<entrysig<nat>>> = entrypoint(token, "getBalance");
  var gb : entrysig<entrysig<nat>> = getopt(gbopt);
  transfer 0tz to entry gb(self.balanceInquiry);
}
